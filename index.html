<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ultimate News Hub</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<style>
body{font-family:sans-serif;background:#f5f5f5;margin:0;padding:0;}
nav{background:#003366;color:#fff;padding:10px;display:flex;flex-wrap:wrap;}
nav a{color:#fff;margin-right:15px;text-decoration:none;font-weight:bold;cursor:pointer;margin-bottom:5px;}
.news-card{background:#fff;padding:15px;margin-bottom:15px;border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,0.1);}
.news-card img{width:100%;height:auto;border-radius:5px;}
.ad-slot{margin:15px 0;text-align:center;}
#search-bar{width:100%;padding:8px;margin-bottom:10px;border-radius:5px;border:1px solid #ccc;}
.btn-suggestion{margin:2px;}
</style>

<!-- AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9905309315543268"
     crossorigin="anonymous"></script>
</head>
<body>

<nav>
<a onclick="navigate('home')">HOME</a>
<a onclick="navigate('world')">WORLD</a>
<a onclick="navigate('nigeria')">NIGERIA</a>
<a onclick="navigate('sports')">SPORTS</a>
<a onclick="navigate('entertainment')">ENTERTAINMENT</a>
<a onclick="navigate('crime')">CRIME</a>
<a onclick="navigate('search')">SEARCH</a>
<a onclick="navigate('settings')">SETTINGS</a>
</nav>

<main id="main-container" class="container mt-3"></main>

<script>
const container = document.getElementById("main-container");
const NEWS_API_KEY = "b63a1ae1b48d4c8787db598937cdf789";

// Navigation helper
function navigate(pageName){
    window.history.pushState({}, "", "?page="+pageName);
    renderPage(pageName);
}

// Get initial page from URL
const params = new URLSearchParams(window.location.search);
let currentPage = params.get("page") || "home";
renderPage(currentPage);

// Render page dynamically
function renderPage(page){
    container.innerHTML = "";
    currentPage = page;

    if(page==="search"){
        renderSearchPage();
    } else if(page==="settings"){
        renderSettingsPage();
    } else {
        renderNewsPage(page);
    }
}

// ------------------
// Ad helper
// ------------------
function createAdSlot(slotId="1234567890"){
  const div=document.createElement("div");
  div.className="ad-slot";
  div.innerHTML=`<ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-9905309315543268"
         data-ad-slot="${slotId}"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});<\/script>`;
  return div;
}

// ------------------
// Search page
// ------------------
function renderSearchPage(){
    container.innerHTML=`
        <h2>Search News</h2>
        <input id="search-bar" placeholder="Type keyword..." />
        <div id="suggestions" class="mb-2"></div>
        <div id="search-results"></div>
    `;
    const suggestions=["Motivation","Tech","Business","Health","Science","Education","Global Trends","Breaking News"];
    const sugDiv=document.getElementById("suggestions");
    suggestions.forEach(s=>{
        const btn=document.createElement("button");
        btn.className="btn btn-primary btn-suggestion";
        btn.innerText=s;
        btn.onclick=()=>{loadNews(s.toLowerCase(),true)};
        sugDiv.appendChild(btn);
    });
    document.getElementById("search-bar").addEventListener("keyup",(e)=>{
        loadNews(e.target.value.toLowerCase(),true);
    });
}

// ------------------
// Settings page
// ------------------
function renderSettingsPage(){
    container.innerHTML=`<h2>Settings & Preferences</h2><p>Toggle sections to show/hide:</p>`;
    const sections=["Home","World","Nigeria","Sports","Entertainment","Crime","Life Goals"];
    sections.forEach(s=>{
        const label=document.createElement("label");
        label.innerHTML=`<input type="checkbox" checked data-section="${s}"> ${s} <br>`;
        container.appendChild(label);
    });
}

// ------------------
// News page
// ------------------
function renderNewsPage(page){
    let categoryMap = {
        "home": null,
        "world":"general",
        "nigeria":"nigeria",
        "sports":"sports",
        "entertainment":"entertainment",
        "crime":"crime"
    };
    loadNews(categoryMap[page]||null);
}

// ------------------
// Fetch news from NewsAPI
// ------------------
async function loadNews(category=null,isSearch=false){
    container.innerHTML = "<p>Loading news...</p>";
    try{
        let url;
        if(isSearch){
            url = `https://newsapi.org/v2/everything?q=${category}&sortBy=publishedAt&language=en&apiKey=${NEWS_API_KEY}`;
        } else if(category==="nigeria"){
            url = `https://newsapi.org/v2/top-headlines?country=ng&apiKey=${NEWS_API_KEY}`;
        } else if(category==="crime"){
            url = `https://newsapi.org/v2/everything?q=crime&sortBy=publishedAt&language=en&apiKey=${NEWS_API_KEY}`;
        } else{
            url = `https://newsapi.org/v2/top-headlines?country=us${category?`&category=${category}`:""}&apiKey=${NEWS_API_KEY}`;
        }

        const res = await fetch(url);
        const data = await res.json();
        container.innerHTML = "";
        const articles = data.articles || [];

        articles.forEach(item=>{
            const card=document.createElement("div");
            card.className="news-card";
            const imageUrl = item.urlToImage || 'https://via.placeholder.com/400x200?text=News';
            card.innerHTML=`<img src="${imageUrl}" alt="news"><h2>${item.title}</h2><p>${item.description||''}</p>`;
            card.appendChild(createAdSlot());
            container.appendChild(card);
        });

        // Life goals (motivational placeholders)
        if(!isSearch){
            const lifeGoals=[ 
                {text:"Learn something new every day", image_url:"https://via.placeholder.com/400x200?text=Goal+1"},
                {text:"Stay healthy and exercise", image_url:"https://via.placeholder.com/400x200?text=Goal+2"},
                {text:"Save and invest wisely", image_url:"https://via.placeholder.com/400x200?text=Goal+3"},
                {text:"Read books regularly", image_url:"https://via.placeholder.com/400x200?text=Goal+4"},
                {text:"Help others and give back", image_url:"https://via.placeholder.com/400x200?text=Goal+5"},
            ];
            lifeGoals.forEach(goal=>{
                const card=document.createElement("div");
                card.className="news-card";
                card.innerHTML=`<img src="${goal.image_url}" alt="life"><p>${goal.text}</p>`;
                card.appendChild(createAdSlot());
                container.appendChild(card);
            });
        }

    } catch(e){
        container.innerHTML="<p>Failed to load content. Try again later.</p>";
        console.error(e);
    }
}

// ------------------
// Handle browser back/forward
// ------------------
window.addEventListener('popstate', () => {
    const params = new URLSearchParams(window.location.search);
    const page = params.get("page") || "home";
    renderPage(page);
});
</script>

</body>
</html>
