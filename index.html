<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ultimate AI News Hub</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<style>
body{font-family:sans-serif;background:#f5f5f5;margin:0;padding:0;}
nav{background:#003366;color:#fff;padding:10px;}
nav a{color:#fff;margin-right:15px;text-decoration:none;font-weight:bold;}
.news-card{background:#fff;padding:15px;margin-bottom:15px;border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,0.1);}
.news-card img{width:100%;height:auto;border-radius:5px;}
.ad-slot{margin:15px 0;text-align:center;}
#search-bar{width:100%;padding:8px;margin-bottom:10px;border-radius:5px;border:1px solid #ccc;}
.btn-suggestion{margin:2px;}
</style>

<!-- AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9905309315543268"
     crossorigin="anonymous"></script>
</head>
<body>

<nav>
<a href="?page=home">HOME</a>
<a href="?page=world">WORLD</a>
<a href="?page=nigeria">NIGERIA</a>
<a href="?page=sports">SPORTS</a>
<a href="?page=entertainment">ENTERTAINMENT</a>
<a href="?page=crime">CRIME</a>
<a href="?page=search">SEARCH</a>
<a href="?page=settings">SETTINGS</a>
</nav>

<main id="main-container" class="container mt-3"></main>

<script>
const container = document.getElementById("main-container");
const params = new URLSearchParams(window.location.search);
const page = params.get("page") || "home";

// Your deployed Vercel backend
const BACKEND_URL = "https://dino-coin-run-delta.vercel.app/api/news";

// Helper to create AdSense slot
function createAdSlot(slotId="1234567890"){
  const div=document.createElement("div");
  div.className="ad-slot";
  div.innerHTML=`<ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-9905309315543268"
         data-ad-slot="${slotId}"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});<\/script>`;
  return div;
}

// ----------------------
// SEARCH PAGE
// ----------------------
if(page==="search"){
  container.innerHTML=`
    <h2>Search News</h2>
    <input id="search-bar" placeholder="Type keyword..." />
    <div id="suggestions" class="mb-2"></div>
    <div id="search-results"></div>
  `;
  const suggestions=["Motivation","Tech","Business","Health","Science","Education","Global Trends","Breaking News"];
  const sugDiv=document.getElementById("suggestions");
  suggestions.forEach(s=>{
    const btn=document.createElement("button");
    btn.className="btn btn-primary btn-suggestion";
    btn.innerText=s;
    btn.onclick=()=>{loadNews(s.toLowerCase())};
    sugDiv.appendChild(btn);
  });
  document.getElementById("search-bar").addEventListener("keyup",(e)=>{
    loadNews(e.target.value.toLowerCase());
  });
}

// ----------------------
// SETTINGS PAGE
// ----------------------
else if(page==="settings"){
  container.innerHTML=`<h2>Settings & Preferences</h2><p>Toggle sections to show/hide:</p>`;
  const sections=["Home","World","Nigeria","Sports","Entertainment","Crime","Life Goals"];
  sections.forEach(s=>{
    const label=document.createElement("label");
    label.innerHTML=`<input type="checkbox" checked data-section="${s}"> ${s} <br>`;
    container.appendChild(label);
  });
}

// ----------------------
// HOME / CATEGORY / DEFAULT
// ----------------------
else{
  loadNews(page==="home"?null:page);
}

// ----------------------
// Fetch AI News / Life Goals from backend
// ----------------------
async function loadNews(category=null){
  container.innerHTML="<p>Loading news...</p>";
  try{
    const url=new URL(BACKEND_URL);
    if(category) url.searchParams.append("category", category);
    const res=await fetch(url);
    const newsItems=await res.json();

    container.innerHTML="";
    newsItems.forEach(item=>{
      const card=document.createElement("div");
      card.className="news-card";
      card.innerHTML=`<img src="${item.image_url}" alt="news"><h2>${item.title}</h2><p>${item.summary}</p>`;
      card.appendChild(createAdSlot());
      container.appendChild(card);
    });

    // Optional: Life goals placeholder
    const lifeGoals=[ 
      {text:"Learn something new every day", image_url:"https://via.placeholder.com/400x200?text=Goal+1"},
      {text:"Stay healthy and exercise", image_url:"https://via.placeholder.com/400x200?text=Goal+2"},
      {text:"Save and invest wisely", image_url:"https://via.placeholder.com/400x200?text=Goal+3"},
      {text:"Read books regularly", image_url:"https://via.placeholder.com/400x200?text=Goal+4"},
      {text:"Help others and give back", image_url:"https://via.placeholder.com/400x200?text=Goal+5"},
    ];
    lifeGoals.forEach(goal=>{
      const card=document.createElement("div");
      card.className="news-card";
      card.innerHTML=`<img src="${goal.image_url}" alt="life"><p>${goal.text}</p>`;
      card.appendChild(createAdSlot());
      container.appendChild(card);
    });

  } catch(e){
    container.innerHTML="<p>Failed to load content. Try again later.</p>";
    console.error(e);
  }
}
</script>

</body>
</html>
